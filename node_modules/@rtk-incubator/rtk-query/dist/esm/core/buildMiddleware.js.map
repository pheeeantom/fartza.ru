{"version":3,"file":"buildMiddleware.js","sources":["../../../src/core/buildMiddleware.ts"],"sourcesContent":[null],"names":["buildMiddleware","reducerPath","context","endpointDefinitions","queryThunk","mutationThunk","api","assertTagType","removeQueryResult","unsubscribeQueryResult","updateSubscriptionOptions","resetApiState","internalActions","currentRemovalTimeouts","currentPolls","actions","invalidateTags","createAction","middleware","mwApi","next","action","result","isAnyOf","isFulfilled","isRejectedWithValue","calculateProvidedByThunk","match","calculateProvidedBy","payload","undefined","handleUnsubscribe","updatePollingInterval","pending","rejected","meta","condition","arg","fulfilled","startNextPoll","onFocus","refetchValidQueries","onOnline","key","poll","Object","entries","timeout","clearTimeout","refetchQuery","querySubState","queryCacheKey","override","endpointName","originalArgs","subscribe","forceRefetch","startedTimeStamp","Date","now","type","state","getState","queries","subscriptions","batch","keys","subscriptionSubState","status","QueryStatus","uninitialized","shouldRefetch","values","some","sub","every","config","dispatch","tags","toInvalidate","Set","tag","provided","invalidateSubscriptions","id","flatten","invalidate","add","length","keepUnusedDataFor","currentTimeout","setTimeout","lowestPollingInterval","findLowestPollingInterval","Number","isFinite","currentPoll","nextPollTimestamp","currentInterval","pollingInterval","subscribers","POSITIVE_INFINITY","subscription","Math","min"],"mappings":"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"}