{"version":3,"file":"react_search_js.bundle.js","mappings":"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","sources":["webpack://fartza.ru/./react/search.js"],"sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setLastArgs } from \"../store/reducers/goods_slice\";\r\nimport { goodsAPI } from \"../store/services/goods_service\";\r\n\r\nclass Search extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.getGoods = this.getGoods.bind(this);\r\n\t\tthis.getGoodsURL = this.getGoodsURL.bind(this);\r\n\t\tthis.getGoodsEnter = this.getGoodsEnter.bind(this);\r\n\t\tthis.reset = this.reset.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet searchParams = new URLSearchParams(location.search);\r\n        if (searchParams.get('query') && searchParams.get('query').length > 1) {\r\n        \t/*let params = new URLSearchParams(new URL(window.location.href).search);\r\n\t\t\tlet query;\r\n\t\t\tlet sort;\r\n\t\t\tfor(let pair of params.entries()) {\r\n\t\t\t  if (pair[0] == 'query') {\r\n\t\t\t  \tquery = pair[1];\r\n\t\t\t  }\r\n\t\t\t  else if (pair[0] == 'sort') {\r\n\t\t\t  \tsort = pair[1];\r\n\t\t\t  }\r\n\t\t\t}*/\r\n\t\t\tlet searchParams = new URLSearchParams(location.search);\r\n\t\t\tlet query = searchParams.get('query');\r\n\t\t\t//let sort = searchParams.get('sort');\r\n        \tdocument.getElementById(\"search\").value = query;\r\n\t\t\t//this.getGoodsURL(query, 0, sort);\r\n\t\t}\r\n    }\r\n\r\n\tgetGoodsURL(query, since, sort) {\r\n\t\t/*fetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({ command: 'searchGoods', word: query, since: since, sort: sort })\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\tthis.props.updateGoods(body.goods[0]);\r\n\t\t\t});\r\n\t\t});*/\r\n\t\t/*this.props.sendAPIRequest({ command: 'searchGoods', word: query, since: since, sort: sort }, '/api', 'POST').then(resolve => {\r\n\t\t\tif (resolve.body.goods[0].length == 0) {\r\n\t\t\t\tthis.props.updateGoods('Ничего не найдено!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.props.updateGoods(resolve.body.goods[0]);\r\n\t\t}).catch(reject => {\r\n\t\t\tthis.props.updateGoods(reject.error);\r\n\t\t});*/\r\n\t\tsort = sort ?? 'new';\r\n\t\tthis.props.fetchAllGoods({ word: query, since, sort });\r\n\t\tthis.props.setLastArgs({ word: query, since, sort });\r\n\t}\r\n\r\n\t/*getGoods(event) {\r\n\t\tfetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({ command: 'searchGoods', word: document.getElementById(\"search\").value, since: 0 })\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\temitter.emit(\"CHANGE\", body.goods[0]);\r\n\t\t\t});\r\n\t\t});\r\n\t}*/\r\n\r\n\tgetGoods(event) {\r\n\t\t/*const url = new URL(window.location);\r\n\t\turl.searchParams.set('search', 'true');\r\n\t\turl.searchParams.set('query', document.getElementById(\"search\").value);\r\n        url.pathname = \"/\";\r\n\t\twindow.history.pushState({}, '', url);*/\r\n\t\tif (document.getElementById(\"search\").value.length > 1) {\r\n\t\t\tlet searchParams = new URLSearchParams(location.search);\r\n\t\t\tsearchParams.set('query', document.getElementById(\"search\").value);\r\n\t\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);\r\n\t\t\t//window.location.reload();\r\n\t\t\t/*let params = new URLSearchParams(new URL(window.location.href).search);\r\n\t\t\tlet sort;\r\n\t\t\tfor(let pair of params.entries()) {\r\n\t\t\t\tif (pair[0] == 'sort') {\r\n\t\t\t\t\tsort = pair[1];\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\tlet sort = searchParams.get('sort');\r\n\t\t\tthis.getGoodsURL(document.getElementById(\"search\").value, 0, sort);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGoodsEnter(event) {\r\n\t\tif (event.keyCode == 13) {\r\n\t\t\tthis.getGoods(event);\r\n\t\t}\r\n\t}\r\n\r\n\treset(event) {\r\n\t\tlet searchParams = new URLSearchParams(location.search);\r\n\t\tsearchParams.set('query', '');\r\n\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);\r\n\t\tdocument.getElementById(\"search\").value = \"\";\r\n\t\tlet sort = searchParams.get('sort');\r\n\t\tthis.getGoodsURL(\"\", 0, sort);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <div id=\"search-wrapper\" className=\"border-bottom\">\r\n                <div style={{textAlign: 'center', marginBottom: '25px'}}>\r\n                    <input type=\"text\" className=\"form-control\" id=\"search\" style={{display: 'inline', width: '60vw', marginRight: '10px', verticalAlign: 'middle'}} onKeyUp={this.getGoodsEnter} />\r\n                    <button type=\"button\" className=\"btn btn-primary\" onClick={this.getGoods} style={{display: 'inline', verticalAlign: 'middle'}}>Найти!</button>\r\n\t\t\t\t\t<button type=\"button\" className=\"link-secondary res\" onClick={this.reset} style={{display: 'inline', verticalAlign: 'middle'}}>Сбросить</button>\r\n\t\t\t\t</div>\r\n            </div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*const mapStateToProps = (state) => {\r\n    return {\r\n\t\tfetchAllGoodsState: (args) => goodsAPI.endpoints.fetchAllGoods.select(args)(state),\r\n\t\tlastArgs: state.goodsReducer.lastArgs\r\n    };\r\n}*/\r\n\r\nconst mapDispatchToProps = {\r\n    fetchAllGoods: goodsAPI.endpoints.fetchAllGoods.initiate,//(args) => dispatch(goodsAPI.endpoints.fetchAllGoods.initiate(args)) //(args) => dispatch(getGoodsFromAPI(args))\r\n\tsetLastArgs: setLastArgs\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Search);"],"names":["React","connect","setLastArgs","goodsAPI","Search","props","getGoods","bind","getGoodsURL","getGoodsEnter","reset","searchParams","URLSearchParams","location","search","get","length","query","document","getElementById","value","since","sort","fetchAllGoods","word","event","set","window","history","replaceState","pathname","keyCode","textAlign","marginBottom","display","width","marginRight","verticalAlign","Component","mapDispatchToProps","endpoints","initiate"],"sourceRoot":""}